{% extends 'base.html' %}

{% block title %}Listado de Usuarios{% endblock %}

{% block content %}
<h2>Listado de Usuarios</h2>
 <input type="text" id="buscadorUusarios" placeholder="Buscar por nombre" oninput="filtrarUsuarios()">
<a href="{% url 'crear_usuario' %}" class="standalone-link">Nuevo Usuario</a>

<table>
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Acciones</th>
    </tr>
    {% for usuario in usuarios %}
    <tr>
        <td>{{ usuario.id }}</td>
        <td>{{ usuario.nombre }}</td>
        <td>{{ usuario.email }}</td>
        <td>
            <a href="{% url 'editar_usuario' usuario.id %}">Editar</a> |
            <a href="{% url 'eliminar_usuario' usuario.id %}">Eliminar</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

<script>
function filtrarUsuarios() {
    const input = document.getElementById('buscadorUsuarios');
    const filtro = input.value.toLowerCase();
    const filas = document.querySelectorAll('#tablaUsuarios .usuario-item');

    filas.forEach(fila => {
        const nombre = fila.querySelector('.col-nombre').innerText.toLowerCase();
        const email = fila.querySelector('.col-email').innerText.toLowerCase();

        if (nombre.includes(filtro) || email.includes(filtro)) {
            fila.style.display = '';
        } else {
            fila.style.display = 'none';
        }
    });
}
</script>

